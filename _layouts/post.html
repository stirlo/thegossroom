---
layout: default
---
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">{{ page.title | escape }}</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
        {{ page.date | date: date_format }}
      </time>
      {%- if page.modified_date -%}
        ~ 
        {%- assign mdate = page.modified_date | date_to_xmlschema -%}
        <time class="dt-modified" datetime="{{ mdate }}" itemprop="dateModified">
          {{ mdate | date: date_format }}
        </time>
      {%- endif -%}
      {%- if page.author -%}
        ‚Ä¢ {% for author in page.author %}
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">{{ author }}</span></span>
            {%- if forloop.last == false %}, {% endif -%}
        {% endfor %}
      {%- endif -%}

      {%- if page.drama_score -%}
        ‚Ä¢ <span class="drama-score">üå°Ô∏è {{ page.drama_score }}¬∞</span>
      {%- endif -%}

      {%- if page.primary_celebrity -%}
        ‚Ä¢ <span class="primary-celebrity">üé≠ {{ page.primary_celebrity | replace: '_', ' ' | title }}</span>
      {%- endif -%}
    </p>

    {%- if page.tags.size > 0 -%}
    <div class="post-tags">
      {%- for tag in page.tags -%}
        <a href="/tag/{{ tag | slugify }}/" class="tag">{{ tag }}</a>
      {%- endfor -%}
    </div>
    {%- endif -%}
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    {{ content }}
  </div>

  {%- if page.source_url -%}
  <div class="post-source">
    <p><strong>Source:</strong> <a href="{{ page.source_url }}" target="_blank" rel="noopener">{{ page.source | default: "Original Article" }}</a></p>
  </div>
  {%- endif -%}

  <!-- RELATED ARTICLES SECTION -->
  <div class="related-articles">
    <h3>üî• Related Drama</h3>

    {% comment %}
    Find related posts based on shared tags and drama scores
    {% endcomment %}

    {% assign related_posts = '' | split: '' %}
    {% assign current_tags = page.tags | join: ',' | downcase | split: ',' %}

    {% for post in site.posts limit: 100 %}
      {% unless post.url == page.url %}
        {% assign post_tags = post.tags | join: ',' | downcase | split: ',' %}
        {% assign shared_tags = 0 %}

        {% comment %}Count shared tags{% endcomment %}
        {% for current_tag in current_tags %}
          {% if post_tags contains current_tag %}
            {% assign shared_tags = shared_tags | plus: 1 %}
          {% endif %}
        {% endfor %}

        {% comment %}Only include posts with shared tags and decent drama scores{% endcomment %}
        {% if shared_tags > 0 and post.drama_score and post.drama_score >= 20 %}
          {% assign relevance_score = shared_tags | times: 100 | plus: post.drama_score %}
          {% assign post_data = relevance_score | append: '|' | append: post.url | append: '|' | append: shared_tags %}
          {% assign related_posts = related_posts | push: post_data %}
        {% endif %}
      {% endunless %}
    {% endfor %}

    {% if related_posts.size > 0 %}
      {% assign sorted_related = related_posts | sort | reverse %}
      <div class="related-grid">
        {% for related_item in sorted_related limit: 6 %}
          {% assign parts = related_item | split: '|' %}
          {% assign relevance = parts[0] %}
          {% assign post_url = parts[1] %}
          {% assign shared_count = parts[2] %}
          {% assign related_post = site.posts | where: "url", post_url | first %}

          {% if related_post %}
          <article class="related-card">
            <h4><a href="{{ related_post.url }}">{{ related_post.title }}</a></h4>
            <div class="related-meta">
              <span class="drama-score">üå°Ô∏è {{ related_post.drama_score | default: 0 }}¬∞</span>
              <time>{{ related_post.date | date: "%b %d" }}</time>
              <span class="shared-tags">{{ shared_count }} shared tag{% if shared_count != '1' %}s{% endif %}</span>
            </div>
            <div class="related-excerpt">
              {{ related_post.excerpt | strip_html | truncatewords: 15 }}
            </div>
            {% if related_post.tags.size > 0 %}
            <div class="related-tags">
              {% for tag in related_post.tags limit: 3 %}
                <a href="/tag/{{ tag | slugify }}/" class="tag-link">{{ tag }}</a>
              {% endfor %}
            </div>
            {% endif %}
          </article>
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div class="no-related">
        <p>ü§î No related drama found... this story is truly unique!</p>
        {% if page.tags.size > 0 %}
          <p>Try browsing by tags: 
          {% for tag in page.tags limit: 3 %}
            <a href="/tag/{{ tag | slugify }}/" class="tag-link">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
          {% endfor %}
          </p>
        {% endif %}
      </div>
    {% endif %}
  </div>

  {%- if site.disqus.shortname -%}
    {%- include disqus_comments.html -%}
  {%- endif -%}

  <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
</article>

<style>
/* Enhanced post meta styling */
.drama-score {
  font-weight: bold;
  color: #dc3545;
  background: #fff5f5;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
}

.primary-celebrity {
  font-weight: bold;
  color: #6f42c1;
  background: #f8f5ff;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
}

/* Post tags styling */
.post-tags {
  margin-top: 1rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.post-tags .tag {
  background: #e9ecef;
  color: #495057;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  text-decoration: none;
  font-size: 0.9rem;
  transition: all 0.2s ease;
  border: 1px solid #dee2e6;
}

.post-tags .tag:hover {
  background: #d63384;
  color: white;
  border-color: #d63384;
  transform: translateY(-1px);
}

/* Related articles section */
.related-articles {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 3px solid #f8f9fa;
  background: #fafbfc;
  padding: 2rem;
  border-radius: 10px;
  margin-left: -2rem;
  margin-right: -2rem;
}

.related-articles h3 {
  color: #d63384;
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
  text-align: center;
}

.related-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.related-card {
  border: 1px solid #e9ecef;
  padding: 1.5rem;
  border-radius: 10px;
  background: white;
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.related-card:hover {
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
  transform: translateY(-3px);
  border-color: #d63384;
}

.related-card h4 {
  margin: 0 0 1rem 0;
  font-size: 1.1rem;
  line-height: 1.3;
}

.related-card h4 a {
  color: #d63384;
  text-decoration: none;
  font-weight: 600;
}

.related-card h4 a:hover {
  text-decoration: underline;
}

.related-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  font-size: 0.85rem;
  color: #6c757d;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.related-meta .drama-score {
  font-weight: bold;
  color: #dc3545;
  background: #fff5f5;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
}

.shared-tags {
  background: #e3f2fd;
  color: #1976d2;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 500;
}

.related-excerpt {
  color: #495057;
  line-height: 1.5;
  margin-bottom: 1rem;
  font-size: 0.95rem;
}

.related-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.tag-link {
  background: #f8f9fa;
  color: #6c757d;
  padding: 0.2rem 0.6rem;
  border-radius: 15px;
  text-decoration: none;
  font-size: 0.8rem;
  border: 1px solid #e9ecef;
  transition: all 0.2s ease;
}

.tag-link:hover {
  background: #d63384;
  color: white;
  border-color: #d63384;
}

.no-related {
  text-align: center;
  padding: 2rem;
  background: white;
  border-radius: 10px;
  color: #6c757d;
  border: 2px dashed #e9ecef;
}

.no-related p {
  margin-bottom: 1rem;
}

/* Source styling */
.post-source {
  margin-top: 2rem;
  padding: 1rem;
  background: #f8f9fa;
  border-left: 4px solid #d63384;
  border-radius: 0 8px 8px 0;
}

.post-source a {
  color: #d63384;
  font-weight: 500;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .related-articles {
    margin-left: -1rem;
    margin-right: -1rem;
    padding: 1.5rem 1rem;
  }

  .related-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .related-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.3rem;
  }
}
</style>
